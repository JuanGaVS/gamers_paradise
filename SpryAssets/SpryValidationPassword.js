(function(){"undefined"==typeof Spry&&(window.Spry={}),Spry.Widget||(Spry.Widget={}),Spry.Widget.BrowserSniff=function(){""+navigator.appName,""+navigator.platform;var e=""+navigator.userAgent;this.mozilla=this.ie=this.opera=this.safari=!1;var t=/Opera.([0-9\.]*)/i,i=/MSIE.([0-9\.]*)/i,n=/gecko/i,a=/(applewebkit|safari)\/([\d\.]*)/i,o=!1;if(o=e.match(t))this.opera=!0,this.version=parseFloat(o[1]);else if(o=e.match(i))this.ie=!0,this.version=parseFloat(o[1]);else if(o=e.match(a))this.safari=!0,this.version=parseFloat(o[2]);else if(e.match(n)){var s=/rv:\s*([0-9\.]+)/i;o=e.match(s),this.mozilla=!0,this.version=parseFloat(o[1])}this.windows=this.mac=this.linux=!1,this.Platform=e.match(/windows/i)?"windows":e.match(/linux/i)?"linux":e.match(/mac/i)?"mac":e.match(/unix/i)?"unix":"unknown",this[this.Platform]=!0,this.v=this.version,this.safari&&this.mac&&this.mozilla&&(this.mozilla=!1)},Spry.is=new Spry.Widget.BrowserSniff,Spry.Widget.ValidationPassword=function(e,t){if(t=Spry.Widget.Utils.firstValid(t,{}),this.isBrowserSupported()){if(this.init(e,t)===!1)return!1;var i=["submit"].concat(Spry.Widget.Utils.firstValid(this.options.validateOn,[]));i=i.join(","),this.validateOn=0,this.validateOn=this.validateOn|(-1!=i.indexOf("submit")?Spry.Widget.ValidationPassword.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=i.indexOf("blur")?Spry.Widget.ValidationPassword.ONBLUR:0),this.validateOn=this.validateOn|(-1!=i.indexOf("change")?Spry.Widget.ValidationPassword.ONCHANGE:0),Spry.Widget.ValidationPassword.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationPassword.loadQueue.push(this)}},Spry.Widget.ValidationPassword.ONCHANGE=1,Spry.Widget.ValidationPassword.ONBLUR=2,Spry.Widget.ValidationPassword.ONSUBMIT=4,Spry.Widget.ValidationPassword.prototype.init=function(e,t){if(t=Spry.Widget.Utils.firstValid(t,[]),this.options=[],this.element=this.getElement(e),!this.element)return!1;if("INPUT"==this.element.nodeName.toUpperCase()&&this.element.type!==void 0&&"PASSWORD"==this.element.type.toUpperCase())this.input=this.element;else{var i=Spry.Widget.Utils.getValidChildrenWithNodeNameAtAnyLevel(this.element,"INPUT","PASSWORD");this.input=i&&i.length>0?i[0]:!1}if(!this.input)return!1;this.event_handlers=[],this.validClass="passwordValidState",this.focusClass="passwordFocusState",this.requiredClass="passwordRequiredState",this.invalidStrengthClass="passwordInvalidStrengthState",this.invalidCharsMinClass="passwordMinCharsState",this.invalidCharsMaxClass="passwordMaxCharsState",this.invalidCustomClass="passwordCustomState",t.isRequired=Spry.Widget.Utils.firstValid(t.isRequired,!0),t.additionalError=Spry.Widget.Utils.firstValid(t.additionalError,!1),t.additionalError&&(t.additionalError=this.getElement(t.additionalError));var n=Spry.Widget.Utils.getOptionRealValue;return t.minChars=n(t.minChars,!1),t.maxChars=n(t.maxChars,!1),t.maxChars&&this.input.removeAttribute("maxLength"),t.minAlphaChars=n(t.minAlphaChars,!1),t.maxAlphaChars=n(t.maxAlphaChars,!1),t.minUpperAlphaChars=n(t.minUpperAlphaChars,!1),t.maxUpperAlphaChars=n(t.maxUpperAlphaChars,!1),t.minSpecialChars=n(t.minSpecialChars,!1),t.maxSpecialChars=n(t.maxSpecialChars,!1),t.minNumbers=n(t.minNumbers,!1),t.maxNumbers=n(t.maxNumbers,!1),t.minAlphaChars!==!1&&t.maxAlphaChars!==!1&&t.minAlphaChars>t.maxAlphaChars||t.minUpperAlphaChars!==!1&&t.maxUpperAlphaChars!==!1&&t.minUpperAlphaChars>t.maxUpperAlphaChars||t.minSpecialChars!==!1&&t.maxSpecialChars!==!1&&t.minSpecialChars>t.maxSpecialChars||t.minNumbers!==!1&&t.maxNumbers!==!1&&t.minNumbers>t.maxNumbers||t.maxUpperAlphaChars!==!1&&t.maxAlphaChars!==!1&&t.maxUpperAlphaChars>t.maxAlphaChars||t.maxChars!==!1&&t.minAlphaChars+t.minUpperAlphaChars+t.minSpecialChars+t.minNumbers>t.maxChars?(this.showError("Invalid Strength Options!"),!1):(Spry.Widget.Utils.setOptions(this,t),Spry.Widget.Utils.setOptions(this.options,t),void 0)},Spry.Widget.ValidationPassword.loadQueue=[],Spry.Widget.ValidationPassword.onloadDidFire=!1,Spry.Widget.ValidationPassword.prototype.getElement=function(e){return e&&"string"==typeof e&&(e=document.getElementById(e)),e},Spry.Widget.ValidationPassword.processLoadQueue=function(){Spry.Widget.ValidationPassword.onloadDidFire=!0;for(var e=Spry.Widget.ValidationPassword.loadQueue,t=e.length,i=0;t>i;i++)e[i].attachBehaviors()},Spry.Widget.ValidationPassword.addLoadListener=function(e){window.addEventListener!==void 0?window.addEventListener("load",e,!1):document.addEventListener!==void 0?document.addEventListener("load",e,!1):window.attachEvent!==void 0&&window.attachEvent("onload",e)},Spry.Widget.ValidationPassword.addLoadListener(Spry.Widget.ValidationPassword.processLoadQueue),Spry.Widget.ValidationPassword.prototype.destroy=function(){if(this.event_handlers)for(var e=0;this.event_handlers.length>e;e++)Spry.Widget.Utils.removeEventListener(this.event_handlers[e][0],this.event_handlers[e][1],this.event_handlers[e][2],!1);try{delete this.element}catch(t){}try{delete this.input}catch(t){}try{delete this.event_handlers}catch(t){}try{delete this.options}catch(t){}for(var i=Spry.Widget.Form.onSubmitWidgetQueue,n=i.length,e=0;n>e;e++)if(i[e]==this){i.splice(e,1);break}},Spry.Widget.ValidationPassword.prototype.attachBehaviors=function(){if(!(this.event_handlers&&this.event_handlers.length>0)){var e=this.event_handlers;if(this.input){var t=this;if(this.input.setAttribute("AutoComplete","off"),this.validateOn&Spry.Widget.ValidationPassword.ONCHANGE){var i=Spry.is.mozilla||Spry.is.opera||Spry.is.safari?"input":Spry.is.ie?"propertychange":"change";e.push([this.input,i,function(e){return t.isDisabled()?!0:t.validate(e||event)}]),Spry.is.mozilla||Spry.is.safari?e.push([this.input,"dragdrop",function(e){return t.isDisabled()?!0:t.validate(e)}]):Spry.is.ie&&e.push([this.input,"drop",function(){return t.isDisabled()?!0:t.validate(event)}])}e.push([this.input,"blur",function(e){return t.isDisabled()?!0:t.onBlur(e||event)}]),e.push([this.input,"focus",function(e){return t.isDisabled()?!0:t.onFocus(e||event)}]);for(var n=0;this.event_handlers.length>n;n++)Spry.Widget.Utils.addEventListener(this.event_handlers[n][0],this.event_handlers[n][1],this.event_handlers[n][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.input,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(e){return e=e||event,Spry.Widget.Form.onSubmit(e,e.srcElement||e.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(e){var e=e||event;return Spry.Widget.Form.onReset(e,e.srcElement||e.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}}},Spry.Widget.ValidationPassword.prototype.reset=function(){this.switchClassName(this.element,""),this.switchClassName(this.additionalError,""),this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass),Spry.is.ie&&(this.input.forceFireFirstOnPropertyChange=!0,this.input.removeAttribute("forceFireFirstOnPropertyChange"))},Spry.Widget.ValidationPassword.prototype.validateLength=function(){var e=this.options;return this.isRequired&&""==this.input.value?this.requiredClass:e.minChars>0&&this.input.value.length<e.minChars?this.invalidCharsMinClass:e.maxChars!==!1&&this.input.value.length>e.maxChars?this.invalidCharsMaxClass:!0},Spry.Widget.ValidationPassword.prototype.validateStrength=function(){var e=this.options,t=this.input.value;if(e.minAlphaChars!==!1||e.maxAlphaChars!==!1){var i=t.replace(/[^a-z]/gi,"").length;if(e.maxAlphaChars!==!1&&i>e.maxAlphaChars||e.minAlphaChars!==!1&&e.minAlphaChars>i)return!1}if(e.minUpperAlphaChars!==!1||e.maxUpperAlphaChars!==!1){var n=t.replace(/[^A-Z]/g,"").length;if(e.maxUpperAlphaChars!==!1&&n>e.maxUpperAlphaChars||e.minUpperAlphaChars!==!1&&e.minUpperAlphaChars>n)return!1}if(e.minNumbers!==!1||e.maxNumbers!==!1){var a=t.replace(/[^0-9]/g,"").length;if(e.maxNumbers!==!1&&a>e.maxNumbers||e.minNumbers!==!1&&e.minNumbers>a)return!1}if(e.minSpecialChars!==!1||e.maxSpecialChars!==!1){var o=t.replace(/[a-z0-9]/gi,"").length;if(e.maxSpecialChars!==!1&&o>e.maxSpecialChars||e.minSpecialChars!==!1&&e.minSpecialChars>o)return!1}return!0},Spry.Widget.ValidationPassword.prototype.validate=function(e){var t=this.validateLength(e);if(t!==!0)return this.switchClassName(this.element,t),this.switchClassName(this.additionalError,t),!1;var i=this.validateStrength(e);if(i!==!0)return this.switchClassName(this.element,this.invalidStrengthClass),this.switchClassName(this.additionalError,this.invalidStrengthClass),!1;if("function"==typeof this.options.validation){var n=this.options.validation(this.input.value,this.options);if(n!==!0)return this.switchClassName(this.element,this.invalidCustomClass),!1}return this.switchClassName(this.element,this.validClass),this.switchClassName(this.additionalError,this.validClass),!0},Spry.Widget.ValidationPassword.prototype.onBlur=function(e){this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass),this.validateOn&Spry.Widget.ValidationPassword.ONBLUR&&this.validate(e)},Spry.Widget.ValidationPassword.prototype.onFocus=function(){this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass)},Spry.Widget.ValidationPassword.prototype.switchClassName=function(e,t){for(var i=[this.validClass,this.requiredClass,this.invalidCharsMaxClass,this.invalidCharsMinClass,this.invalidStrengthClass,this.invalidCustomClass],n=0;i.length>n;n++)this.removeClassName(e,i[n]);this.addClassName(e,t)},Spry.Widget.ValidationPassword.prototype.addClassName=function(e,t){!e||!t||e.className&&-1!=e.className.indexOf(t)&&-1!=e.className.search(RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)},Spry.Widget.ValidationPassword.prototype.removeClassName=function(e,t){!e||!t||e.className&&-1!=e.className.indexOf(t)&&-1==e.className.search(RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(RegExp("\\s*\\b"+t+"\\b","g"),""))},Spry.Widget.ValidationPassword.prototype.isBrowserSupported=function(){return Spry.is.ie&&Spry.is.v>=5&&Spry.is.windows||Spry.is.mozilla&&Spry.is.v>=1.4||Spry.is.safari||Spry.is.opera&&Spry.is.v>=9},Spry.Widget.ValidationPassword.prototype.isDisabled=function(){return this.input&&(this.input.disabled||this.input.readOnly)||!this.input},Spry.Widget.ValidationPassword.prototype.showError=function(e){alert("Spry.ValidationPassword ERR: "+e)},Spry.Widget.Form||(Spry.Widget.Form={}),Spry.Widget.Form.onSubmitWidgetQueue||(Spry.Widget.Form.onSubmitWidgetQueue=[]),Spry.Widget.Form.validate||(Spry.Widget.Form.validate=function(e){for(var t=!0,i=!0,n=Spry.Widget.Form.onSubmitWidgetQueue,a=n.length,o=0;a>o;o++)n[o].isDisabled()||n[o].form!=e||(i=n[o].validate(),t=i&&t);return t}),Spry.Widget.Form.onSubmit||(Spry.Widget.Form.onSubmit=function(e,t){return 0==Spry.Widget.Form.validate(t)?!1:!0}),Spry.Widget.Form.onReset||(Spry.Widget.Form.onReset=function(e,t){for(var i=Spry.Widget.Form.onSubmitWidgetQueue,n=i.length,a=0;n>a;a++)i[a].isDisabled()||i[a].form!=t||"function"!=typeof i[a].reset||i[a].reset();return!0}),Spry.Widget.Form.destroy||(Spry.Widget.Form.destroy=function(e){for(var t=Spry.Widget.Form.onSubmitWidgetQueue,i=0;Spry.Widget.Form.onSubmitWidgetQueue.length>i;i++)t[i].form==e&&"function"==typeof t[i].destroy&&(t[i].destroy(),i--)}),Spry.Widget.Form.destroyAll||(Spry.Widget.Form.destroyAll=function(){for(var e=Spry.Widget.Form.onSubmitWidgetQueue,t=0;Spry.Widget.Form.onSubmitWidgetQueue.length>t;t++)"function"==typeof e[t].destroy&&(e[t].destroy(),t--)}),Spry.Widget.Utils||(Spry.Widget.Utils={}),Spry.Widget.Utils.setOptions=function(e,t,i){if(t)for(var n in t)i&&void 0==t[n]||(e[n]=t[n])},Spry.Widget.Utils.firstValid=function(){for(var e=null,t=0;Spry.Widget.Utils.firstValid.arguments.length>t;t++)if(Spry.Widget.Utils.firstValid.arguments[t]!==void 0){e=Spry.Widget.Utils.firstValid.arguments[t];break}return e},Spry.Widget.Utils.getOptionRealValue=function(e,t){var i=Spry.Widget.Utils.firstValid(e,t);return i!==!1&&(i=parseInt(i,10)),(isNaN(i)||0>i)&&(i=!1),i},Spry.Widget.Utils.getValidChildrenWithNodeNameAtAnyLevel=function(e,t,i){var n=e.getElementsByTagName(t),a=[],o=0;if(n)for(var s=0;n.length>s;s++)n[s].type!==void 0&&n[s].type.toUpperCase()==i.toUpperCase()&&(a[o]=n[s],o++);return a},Spry.Widget.Utils.getFirstParentWithNodeName=function(e,t){for(;e.parentNode&&e.parentNode.nodeName.toLowerCase()!=t.toLowerCase()&&"BODY"!=e.parentNode.nodeName;)e=e.parentNode;return e.parentNode&&e.parentNode.nodeName.toLowerCase()==t.toLowerCase()?e.parentNode:null},Spry.Widget.Utils.addEventListener=function(e,t,i,n){try{e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on"+t,i,n)}catch(a){}},Spry.Widget.Utils.removeEventListener=function(e,t,i,n){try{e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on"+t,i,n)}catch(a){}}})();