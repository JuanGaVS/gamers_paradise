function isSurveyFill(){for(var e=0,t=0;choices.length>t;t++)1==choices[t].idQuestion&&(e+=1);return choices.length==10+e&&choices.length>=11?!0:!1}function addChoices(e){choices.push(e)}function scanChoices(e){for(var t=-1,n=0;choices.length>n;n++)choices[n].idQuestion==e.idQuestion&&(1==choices[n].idQuestion?choices[n].idSelectedChoise==e.idSelectedChoise&&(t=n):t=n);return t}function sendSurvey(){post_to_url("sugerencias.php",parseChoicesToJSON(),"post")}function post_to_url(e,t,n){n=n||"post";var i=document.createElement("form");i.setAttribute("method",n),i.setAttribute("action",e);var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","answers"),o.setAttribute("value",t),i.appendChild(o),document.body.appendChild(i),i.submit()}function parseChoicesToJSON(){for(var e='{"choices":[',t=0;choices.length>t;t++)e+='{"idQuestion":"'+choices[t].idQuestion+'",',e+='"idSelectedChoise":"'+choices[t].idSelectedChoise+'"}',t!=choices.length-1&&(e+=",");return e+="]}"}function login(){FB.login(function(e){e.authResponse&&FB.api("/me?fields=id,first_name,last_name,locale,gender,birthday",function(e){var t=e.id,n=e.first_name,i=e.last_name,o=e.locale,a=e.gender,r=e.birthday;request=$.ajax({type:"POST",url:"login.php",data:{uid:t,first_name:n,last_name:i,gender:a,locale:o,birthday:r},success:function(e){window.location="encuesta.php"}})})},{scope:"user_birthday,user_about_me,user_status"})}function postAndChoose(){FB.ui({method:"feed",name:"Gamers Paradise",link:"https://www.facebook.com/pages/Gamers-Paradise/297090210428630",picture:"http://www.flashfusioner.com/gamers_paradise/imagenes/couch-friends.png",caption:"Responde y gana con Gamers Paradise",description:"Hola, recientemente he completado la encuesta de Gamers Paradise. Me ha sugerido juegos que me quiero jugar ya!!! Â¿Que estas esperando?"},function(e){e&&e.post_id&&FB.api("/me?fields=id",function(e){for(var t,n=e.id,i=document.getElementsByName("games"),o=0,a=i.length;a>o;o++)i[o].checked&&(t=i[o].value);console.log("uid   "+n),console.log("game   "+t);var r=document.getElementById("consoles-select").value;console.log("console    "+r),request=$.ajax({type:"POST",url:"calls.php",data:{method:"saveContestantGame",uid:n,game:t,console:r},success:function(){console.log("success"),window.location="exitos.php"}})})})}function reloadConsoles(){console.log("reload consoles");for(var e,t=document.getElementsByName("games"),n=0,i=t.length;i>n;n++)t[n].checked&&(e=t[n].value);request=$.ajax({type:"POST",url:"calls.php",data:{method:"reloadConsoles",gid:e},success:function(e){var t=""+e;$("#consoles-select").empty();for(var n=$.parseJSON(t),i=0;n.length>i;i++)$("#consoles-select").append("<option value="+n[i].console_id+">"+n[i].name+"</option>")}})}var choices=[];$(".choice").on("click",function(){var e={idQuestion:$(this).attr("name"),idSelectedChoise:$(this).val()},t=scanChoices(e);-1!=t?1==e.idQuestion?choices.splice(t,1):choices[t]=e:addChoices(e),isSurveyFill()?$(".buttonSend").show():$(".buttonSend").hide()}),$(".buttonSend").on("click",function(){sendSurvey()}),$(".buttonNext").on("click",function(){"none"!=$(".question").css("display")?($(".question").hide(),$(".question2").show(),$(this).val("Atras")):($(".question2").hide(),$(".question").show(),$(this).val("Siguiente"))}),$(document).ready(function(){});